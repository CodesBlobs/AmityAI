import{B as c,I as p,S as d}from"./config.CXf-J2WI.js";import{BROWSER_AGENT_PROMPT as u,GUIDANCE_ONLY_PROMPT as f,buildSystemPrompt as m}from"./prompts.BA8uWoHA.js";const i=[{type:"function",function:{name:"cdp_navigate",description:"Navigate to a URL in the current tab",parameters:{type:"object",properties:{url:{type:"string",description:"The URL to navigate to"}},required:["url"]}}},{type:"function",function:{name:"navigate_to_product",description:"Navigate directly to a product page using its link. Use this instead of clicking links when you have a direct URL.",parameters:{type:"object",properties:{link:{type:"string",description:"The direct URL to the product page"}},required:["link"]}}},{type:"function",function:{name:"add_to_cart",description:"Add a product to the shopping cart from a PRODUCT DETAIL PAGE. Use this when already on the product page. For search result pages, use add_to_cart_from_search instead.",parameters:{type:"object",properties:{productId:{type:"string",description:"Product ID (ASIN for Amazon, Item ID for eBay/Walmart)"},link:{type:"string",description:"Direct link to the product page (optional but recommended)"},addToCartSelector:{type:"string",description:"Pre-detected selector for the add-to-cart button (optional)"},selector:{type:"string",description:"CSS selector for the product card (optional)"}}}}},{type:"function",function:{name:"add_to_cart_from_search",description:'Add a product to cart directly from a SEARCH RESULTS PAGE. Use this immediately after web_search when you want to add a product without navigating to its detail page. Finds and clicks the "Add to cart" button within the search result. If the button is not found in search results, will navigate to product page and add from there.',parameters:{type:"object",properties:{productTitle:{type:"string",description:"The product title or name to identify which product to add (partial match is OK)"},productSelector:{type:"string",description:"CSS selector for the product card in search results (optional, will be auto-detected if not provided)"},productLink:{type:"string",description:"Direct link to the product (fallback if button not found in search results)"}},required:["productTitle"]}}},{type:"function",function:{name:"navigate_to_product_specs",description:"Navigate to a product specs/details page from search results using the product UUID. Use this when the user wants to check out the specifications of a product before adding to cart.",parameters:{type:"object",properties:{productUuid:{type:"string",description:"The product UUID from search results (data-uuid attribute)"}},required:["productUuid"]}}},{type:"function",function:{name:"add_to_cart_from_product_page",description:'Add a product to cart from a PRODUCT DETAIL PAGE (specs page). IMPORTANT: ALWAYS ask the user for confirmation before calling this (e.g., "Ready to add this to cart?"). Use this after navigating to product specs when the user confirms they want to add it to cart.',parameters:{type:"object",properties:{}}}},{type:"function",function:{name:"navigate_to_cart",description:"Navigate to the shopping cart page (https://www.amazon.com/gp/cart/view.html?ref_=nav_cart). Use this after adding a product to cart. After calling this, WAIT 2-3 seconds before asking about checkout to allow the page to fully load.",parameters:{type:"object",properties:{}}}},{type:"function",function:{name:"execute_checkout",description:'Click the "Proceed to checkout" button on the shopping cart page to begin the checkout process. IMPORTANT: ALWAYS ask the user "Would you like me to proceed to checkout now?" and WAIT for confirmation before calling this. Use this after navigating to the cart and waiting 2-3 seconds for the page to load.',parameters:{type:"object",properties:{}}}},{type:"function",function:{name:"detect_product_cards",description:"Detect product cards on a shopping search results page. Returns a list of products with title, price, rating, and links. Use this to see what products are available.",parameters:{type:"object",properties:{}}}},{type:"function",function:{name:"select_best_product",description:"Select the best product from detected products based on rating and price. Returns the highest-rated product within the budget constraint. Use this after detect_product_cards to find the best option for the user.",parameters:{type:"object",properties:{maxPrice:{type:"number",description:"Maximum price constraint (optional)"}}}}},{type:"function",function:{name:"cdp_reload",description:"Reload the current page",parameters:{type:"object",properties:{}}}},{type:"function",function:{name:"cdp_back",description:"Go back to the previous page",parameters:{type:"object",properties:{}}}},{type:"function",function:{name:"cdp_click",description:"Click on an element identified by CSS selector",parameters:{type:"object",properties:{selector:{type:"string",description:"CSS selector for the element to click"}},required:["selector"]}}},{type:"function",function:{name:"cdp_type",description:"Type text into an input field. NEVER use for passwords or sensitive data.",parameters:{type:"object",properties:{selector:{type:"string",description:"CSS selector for the input field"},text:{type:"string",description:"Text to type into the field"},clearFirst:{type:"boolean",description:"Whether to clear existing text first (default: true)"}},required:["selector","text"]}}},{type:"function",function:{name:"cdp_scroll",description:"Scroll the page by a delta amount",parameters:{type:"object",properties:{deltaY:{type:"number",description:"Vertical scroll amount (positive = down, negative = up)"},deltaX:{type:"number",description:"Horizontal scroll amount (positive = right, negative = left)"}}}}},{type:"function",function:{name:"cdp_scroll_to_element",description:"Scroll to make an element visible",parameters:{type:"object",properties:{selector:{type:"string",description:"CSS selector for the element to scroll to"},block:{type:"string",description:"Vertical alignment: start, center, end, or nearest",enum:["start","center","end","nearest"]}},required:["selector"]}}},{type:"function",function:{name:"capture_screenshot",description:"Capture a screenshot of the current page to analyze what the user sees. NEVER output or reference the base64 image data in your response. If summarizing visual content, provide a short human-readable summary (1-2 sentences) and do not reproduce full OCR text unless the user explicitly requests and confirms it.",parameters:{type:"object",properties:{analyze:{type:"boolean",description:"Whether to analyze the screenshot for guidance (default: true)"}}}}},{type:"function",function:{name:"get_page_info",description:"Get information about the current page including visible elements",parameters:{type:"object",properties:{}}}},{type:"function",function:{name:"get_visible_elements",description:"Get a list of visible interactive elements on the page",parameters:{type:"object",properties:{type:{type:"string",description:"Filter by element type",enum:["buttons","links","inputs","all"]}}}}},{type:"function",function:{name:"show_visual_guidance",description:"Highlight an element with a visual indicator to help the user find it",parameters:{type:"object",properties:{selector:{type:"string",description:"CSS selector for the element to highlight"},message:{type:"string",description:"Guidance message to show the user"},showArrow:{type:"boolean",description:"Whether to show an arrow pointing to the element"}},required:["message"]}}},{type:"function",function:{name:"hide_visual_guidance",description:"Remove visual guidance highlights from the page",parameters:{type:"object",properties:{}}}},{type:"function",function:{name:"speak_guidance",description:"Speak guidance text aloud using text-to-speech",parameters:{type:"object",properties:{text:{type:"string",description:"Text to speak aloud"},rate:{type:"number",description:"Speech rate (0.5 to 2.0, default: 0.85 for elderly users)"}},required:["text"]}}},{type:"function",function:{name:"web_search",description:"Perform a web search to find products or information. The query must be a specific keyword or phrase.",parameters:{type:"object",properties:{query:{type:"string",description:"Search query"},minPrice:{type:"number",description:"Minimum price filter (Amazon only)"},maxPrice:{type:"number",description:"Maximum price filter (Amazon only)"},sortBy:{type:"string",enum:["review-rank","price-asc","price-desc","relevance"],description:"Sort order (Amazon only, default: review-rank)"}},required:["query"]}}},{type:"function",function:{name:"auto_fill_form",description:"Automatically fill a form using stored personal data. Scans the entire page for all input fields and intelligently matches them with stored user data (name, email, phone, address, etc.). NO NEED to specify field names - it does everything automatically! Use this for booking forms, checkout forms, registration forms, etc.",parameters:{type:"object",properties:{formSelector:{type:"string",description:'Optional CSS selector to limit filling to a specific form (e.g., "#checkout-form")'},submitAfter:{type:"boolean",description:"Whether to submit the form after filling (default: false)"}}}}},{type:"function",function:{name:"fill_form",description:"Fill multiple form fields at once with specific values. Automatically detects input types (text, date, number, etc.) and fills them appropriately. NEVER use for passwords or sensitive data. For automatic filling with stored data, use auto_fill_form instead.",parameters:{type:"object",properties:{fields:{type:"object",description:'Object mapping field labels/names/ids to values (e.g., {"First Name": "John", "Email": "john@example.com"})'},submitAfter:{type:"boolean",description:"Whether to submit the form after filling (default: false)"}},required:["fields"]}}},{type:"function",function:{name:"select_dropdown",description:"Select an option from a dropdown menu by label or value. Works with <select> elements and custom dropdown components.",parameters:{type:"object",properties:{selector:{type:"string",description:"CSS selector for the dropdown element"},label:{type:"string",description:'Label of the dropdown field (e.g., "Country", "Departure City")'},value:{type:"string",description:'The option text or value to select (e.g., "United States", "New York")'}},required:["value"]}}},{type:"function",function:{name:"detect_form_fields",description:"Detect all input fields, dropdowns, and form elements on the current page. Returns detailed information about each field including labels, types, and current values.",parameters:{type:"object",properties:{formSelector:{type:"string",description:"Optional CSS selector to limit detection to a specific form"}}}}},{type:"function",function:{name:"get_user_profile",description:"Get the stored user profile containing identity, address, payment, and shipping information. Use this to retrieve data for filling forms.",parameters:{type:"object",properties:{}}}},{type:"function",function:{name:"find_form_fields",description:"Scan the current page for form fields and return a structured list of detected inputs. Use this before filling a form to understand what fields are available.",parameters:{type:"object",properties:{}}}},{type:"function",function:{name:"map_fields_to_profile",description:"Map detected form fields to the user profile schema. Returns a mapping object that can be passed to fill_form.",parameters:{type:"object",properties:{fields:{type:"array",items:{type:"object",description:"Field mapping object",properties:{field_id:{type:"string",description:"Unique ID of the detected field"},label:{type:"string",description:"Label text associated with the field"},type:{type:"string",description:"HTML input type (text, email, tel, etc.)"},name:{type:"string",description:"Name attribute of the field"}}},description:"List of fields detected by find_form_fields"}},required:["fields"]}}},{type:"function",function:{name:"confirm_filled_fields",description:"Visually confirm which fields have been filled and check for any missing required fields.",parameters:{type:"object",properties:{}}}}];function o(){const t=["capture_screenshot","get_page_info","get_visible_elements","show_visual_guidance","hide_visual_guidance","speak_guidance","detect_form_fields","get_user_profile"];return i.filter(e=>t.includes(e.function.name))}function n(t){if(t.guidanceOnly){const e=o();return t.enableScreenshotTool?e:e.filter(r=>r.function.name!=="capture_screenshot")}return i.filter(e=>!(!t.enableScreenshotTool&&e.function.name==="capture_screenshot"))}export{c as BEHAVIOR_THRESHOLDS,u as BROWSER_AGENT_PROMPT,f as GUIDANCE_ONLY_PROMPT,p as IGNORED_SELECTORS,d as SENSITIVE_PATTERNS,i as TOOL_DEFINITIONS,m as buildSystemPrompt,n as getFilteredTools,o as getGuidanceOnlyTools};
